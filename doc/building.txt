Instructions on how to build the latest version of Vala.
These can be modified to build a specific release.

Step One:
--------
Install the following packages:

 * a C compiler, like GCC
 * a C library, like glibc
 * glib2
 * flex
 * bison
 * Graphviz (libgvc) to build valadoc
 * make
 * autoconf
 * automake
 * libtool


Step Two:
---------
Decide where the Vala compiler is found.

Vala is self-hosting so it needs another Vala compiler to compile
itself.  valac is the name of the executable and can be:

 * installed from an existing package
 * built from a source tarball
 * built from https://gitlab.gnome.org/Archive/vala-bootstrap

If you have an existing valac installed then move on to step three.

If you don't have an existing vala installed (i.e. because you're bootstrapping
or cross-compiling) then a source tarball or the vala-bootstrap archive contain
pre-compiled C files from the Vala sources. These can be used to bootstrap valac.

Source tarballs can be downloaded via:

https://wiki.gnome.org/Projects/Vala/Release

or the vala-bootstrap module is available at:

https://gitlab.gnome.org/Archive/vala-bootstrap


Here is an example on how to download and compile from a Vala release tarball.
In this example it is release version 0.42.0:

curl --silent --show-error --location https://download.gnome.org/sources/vala/0.42/vala-0.42.0.tar.xz --output vala-bootstrap.tar.xz
tar --extract --file vala-bootstrap.tar.xz
cd vala-bootstrap
./configure --prefix=/opt/vala-bootstrap
make && sudo make install

The configure script will check if valac can be found in PATH. If not then
valac is bootstrapped from the C source files in the tarball.
If you do not wish to install the bootstrapped version of valac it can be
found in vala-bootstrap/compiler/valac This is a libtool wrapper script
that makes the libraries in the build directory work together.


An example of downloading and compiling the bootstrap module:

git clone https://gitlab.gnome.org/Archive/vala-bootstrap
cd vala-bootstrap
touch */*.stamp
VALAC=/no-valac ./configure --prefix=/opt/vala-bootstrap
make && sudo make install


Step Three:
----------
Compiling the newest Vala from the repository using a pre-installed valac:

git clone https://gitlab.gnome.org/GNOME/vala
cd vala
./autogen.sh
make && sudo make install

To use valac from a bootstrapped build detailed in step two use:

git clone https://gitlab.gnome.org/GNOME/vala
cd vala
VALAC=/opt/vala-bootstrap/bin/vala ./autogen.sh
make && sudo make install


Compiling Different Vala Versions
---------------------------------
Maybe you now want to compile Vala with the new version you have just installed.
Then you simply clean the version files and start the build:

git clean -dfx
./autogen.sh
make && sudo make install

If you wish to build a specific release, for example 0.40.11:

git checkout 0.40.11
git clean -dfx
./autogen.sh
make && sudo make install
